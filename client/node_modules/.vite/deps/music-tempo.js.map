{
  "version": 3,
  "sources": ["../../music-tempo/dist/node/OnsetDetection.js", "../../music-tempo/dist/node/TempoInduction.js", "../../music-tempo/dist/node/Agent.js", "../../music-tempo/dist/node/BeatTracking.js", "../../music-tempo/dist/node/FFT.js", "../../music-tempo/dist/node/MusicTempo.js"],
  "sourcesContent": ["(function (global, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define([\"module\", \"exports\"], factory);\n    } else if (typeof exports !== \"undefined\") {\n        factory(module, exports);\n    } else {\n        var mod = {\n            exports: {}\n        };\n        factory(mod, mod.exports);\n        global.OnsetDetection = mod.exports;\n    }\n})(this, function (module, exports) {\n    \"use strict\";\n\n    Object.defineProperty(exports, \"__esModule\", {\n        value: true\n    });\n\n    function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError(\"Cannot call a class as a function\");\n        }\n    }\n\n    var _createClass = function () {\n        function defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n                var descriptor = props[i];\n                descriptor.enumerable = descriptor.enumerable || false;\n                descriptor.configurable = true;\n                if (\"value\" in descriptor) descriptor.writable = true;\n                Object.defineProperty(target, descriptor.key, descriptor);\n            }\n        }\n\n        return function (Constructor, protoProps, staticProps) {\n            if (protoProps) defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) defineProperties(Constructor, staticProps);\n            return Constructor;\n        };\n    }();\n\n    var OnsetDetection = function () {\n        function OnsetDetection() {\n            _classCallCheck(this, OnsetDetection);\n        }\n\n        _createClass(OnsetDetection, null, [{\n            key: \"calculateSF\",\n            value: function calculateSF(audioData, fft) {\n                var params = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n                if (typeof fft == \"undefined\") {\n                    throw new ReferenceError(\"fft is undefined\");\n                }\n                if (typeof fft.getHammingWindow !== \"function\" || typeof fft.getSpectrum !== \"function\") {\n                    throw new ReferenceError(\"fft doesn't contain getHammingWindow or getSpectrum methods\");\n                }\n                // Array.fill polyfill\n                if (!Array.prototype.fill) {\n                    Array.prototype.fill = function (value) {\n                        if (this == null) {\n                            throw new TypeError('this is null or not defined');\n                        }\n                        var O = Object(this);\n                        var len = O.length >>> 0;\n                        var start = arguments[1];\n                        var relativeStart = start >> 0;\n                        var k = relativeStart < 0 ? Math.max(len + relativeStart, 0) : Math.min(relativeStart, len);\n                        var end = arguments[2];\n                        var relativeEnd = end === undefined ? len : end >> 0;\n                        var final = relativeEnd < 0 ? Math.max(len + relativeEnd, 0) : Math.min(relativeEnd, len);\n                        while (k < final) {\n                            O[k] = value;\n                            k++;\n                        }\n                        return O;\n                    };\n                }\n                params.bufferSize = params.bufferSize || 2048;\n                //params.samplingRate = params.samplingRate || 44100;\n                params.hopSize = params.hopSize || 441;\n\n                var bufferSize = params.bufferSize,\n                    hopSize = params.hopSize;\n\n\n                var k = Math.floor(Math.log(bufferSize) / Math.LN2);\n                if (Math.pow(2, k) !== bufferSize) {\n                    throw \"Invalid buffer size (\" + bufferSize + \"), must be power of 2\";\n                }\n\n                var hammWindow = fft.getHammingWindow(bufferSize);\n                var spectralFlux = [];\n                var spectrumLength = bufferSize / 2 + 1;\n                var previousSpectrum = new Array(spectrumLength);\n                previousSpectrum.fill(0);\n                var im = new Array(bufferSize);\n\n                var length = audioData.length;\n                var zerosStart = new Array(bufferSize - hopSize);\n                zerosStart.fill(0);\n                audioData = zerosStart.concat(audioData);\n\n                var zerosEnd = new Array(bufferSize - audioData.length % hopSize);\n                zerosEnd.fill(0);\n                audioData = audioData.concat(zerosEnd);\n\n                for (var wndStart = 0; wndStart < length; wndStart += hopSize) {\n                    var wndEnd = wndStart + bufferSize;\n\n                    var re = [];\n                    var _k = 0;\n                    for (var i = wndStart; i < wndEnd; i++) {\n                        re[_k] = hammWindow[_k] * audioData[i];\n                        _k++;\n                    }\n                    im.fill(0);\n\n                    fft.getSpectrum(re, im);\n\n                    var flux = 0;\n                    for (var j = 0; j < spectrumLength; j++) {\n                        var value = re[j] - previousSpectrum[j];\n                        flux += value < 0 ? 0 : value;\n                    }\n                    spectralFlux.push(flux);\n\n                    previousSpectrum = re;\n                }\n\n                return spectralFlux;\n            }\n        }, {\n            key: \"normalize\",\n            value: function normalize(data) {\n                if (!Array.isArray(data)) {\n                    throw \"Array expected\";\n                }\n                if (data.length == 0) {\n                    throw \"Array is empty\";\n                }\n                var sum = 0;\n                var squareSum = 0;\n                for (var i = 0; i < data.length; i++) {\n                    sum += data[i];\n                    squareSum += data[i] * data[i];\n                }\n                var mean = sum / data.length;\n                var standardDeviation = Math.sqrt((squareSum - sum * mean) / data.length);\n                if (standardDeviation == 0) standardDeviation = 1;\n                for (var _i = 0; _i < data.length; _i++) {\n                    data[_i] = (data[_i] - mean) / standardDeviation;\n                }\n            }\n        }, {\n            key: \"findPeaks\",\n            value: function findPeaks(spectralFlux) {\n                var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n                var length = spectralFlux.length;\n                var sf = spectralFlux;\n                var decayRate = params.decayRate || 0.84;\n                var peakFindingWindow = params.peakFindingWindow || 6;\n                var meanWndMultiplier = params.meanWndMultiplier || 3;\n                var peakThreshold = params.peakThreshold || 0.35;\n\n                var max = 0;\n                var av = sf[0];\n                var peaks = [];\n\n                for (var i = 0; i < length; i++) {\n                    av = decayRate * av + (1 - decayRate) * sf[i];\n                    if (sf[i] < av) continue;\n\n                    var wndStart = i - peakFindingWindow;\n                    var wndEnd = i + peakFindingWindow + 1;\n\n                    if (wndStart < 0) wndStart = 0;\n                    if (wndEnd > length) wndEnd = length;\n                    if (av < sf[i]) av = sf[i];\n\n                    var isMax = true;\n                    for (var j = wndStart; j < wndEnd; j++) {\n                        if (sf[j] > sf[i]) isMax = false;\n                    }\n                    if (isMax) {\n                        var meanWndStart = i - peakFindingWindow * meanWndMultiplier;\n                        var meanWndEnd = i + peakFindingWindow;\n                        if (meanWndStart < 0) meanWndStart = 0;\n                        if (meanWndEnd > length) meanWndEnd = length;\n                        var sum = 0;\n                        var count = meanWndEnd - meanWndStart;\n                        for (var _j = meanWndStart; _j < meanWndEnd; _j++) {\n                            sum += sf[_j];\n                        }\n                        if (sf[i] > sum / count + peakThreshold) {\n                            peaks.push(i);\n                        }\n                    }\n                }\n\n                if (peaks.length < 2) {\n                    throw \"Fail to find peaks\";\n                }\n                return peaks;\n            }\n        }]);\n\n        return OnsetDetection;\n    }();\n\n    exports.default = OnsetDetection;\n    module.exports = exports[\"default\"];\n});", "(function (global, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define([\"module\", \"exports\"], factory);\n    } else if (typeof exports !== \"undefined\") {\n        factory(module, exports);\n    } else {\n        var mod = {\n            exports: {}\n        };\n        factory(mod, mod.exports);\n        global.TempoInduction = mod.exports;\n    }\n})(this, function (module, exports) {\n    \"use strict\";\n\n    Object.defineProperty(exports, \"__esModule\", {\n        value: true\n    });\n\n    function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError(\"Cannot call a class as a function\");\n        }\n    }\n\n    var _createClass = function () {\n        function defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n                var descriptor = props[i];\n                descriptor.enumerable = descriptor.enumerable || false;\n                descriptor.configurable = true;\n                if (\"value\" in descriptor) descriptor.writable = true;\n                Object.defineProperty(target, descriptor.key, descriptor);\n            }\n        }\n\n        return function (Constructor, protoProps, staticProps) {\n            if (protoProps) defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) defineProperties(Constructor, staticProps);\n            return Constructor;\n        };\n    }();\n\n    var TempoInduction = function () {\n        function TempoInduction() {\n            _classCallCheck(this, TempoInduction);\n        }\n\n        _createClass(TempoInduction, null, [{\n            key: \"processRhythmicEvents\",\n            value: function processRhythmicEvents(events) {\n                var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n                var widthTreshold = params.widthTreshold || 0.025,\n                    maxIOI = params.maxIOI || 2.5,\n                    minIOI = params.minIOI || 0.07,\n                    length = events.length;\n\n                var clIntervals = [],\n                    clSizes = [],\n                    clCount = 0;\n\n                for (var i = 0; i < length - 1; i++) {\n                    for (var j = i + 1; j < length; j++) {\n                        var ioi = events[j] - events[i];\n                        if (ioi < minIOI) {\n                            continue;\n                        }\n                        if (ioi > maxIOI) {\n                            break;\n                        }\n                        var k = 0;\n                        for (; k < clCount; k++) {\n                            if (Math.abs(clIntervals[k] - ioi) < widthTreshold) {\n                                if (Math.abs(clIntervals[k + 1] - ioi) < Math.abs(clIntervals[k] - ioi) && k < clCount - 1) {\n                                    k++;\n                                }\n                                clIntervals[k] = (clIntervals[k] * clSizes[k] + ioi) / (clSizes[k] + 1);\n                                clSizes[k]++;\n                                break;\n                            }\n                        }\n                        if (k != clCount) continue;\n                        clCount++;\n                        for (; k > 0 && clIntervals[k - 1] > ioi; k--) {\n                            clIntervals[k] = clIntervals[k - 1];\n                            clSizes[k] = clSizes[k - 1];\n                        }\n                        clIntervals[k] = ioi;\n                        clSizes[k] = 1;\n                    }\n                }\n                if (clCount == 0) {\n                    throw \"Fail to find IOIs\";\n                }\n                clIntervals.length = clCount;\n                clSizes.length = clCount;\n                return { clIntervals: clIntervals, clSizes: clSizes };\n            }\n        }, {\n            key: \"mergeClusters\",\n            value: function mergeClusters(clusters) {\n                var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n                var widthTreshold = params.widthTreshold || 0.025;\n\n                var clIntervals = clusters.clIntervals,\n                    clSizes = clusters.clSizes;\n                var clCount = clIntervals.length;\n\n                for (var i = 0; i < clCount; i++) {\n                    for (var j = i + 1; j < clCount; j++) {\n                        if (Math.abs(clIntervals[i] - clIntervals[j]) < widthTreshold) {\n                            clIntervals[i] = (clIntervals[i] * clSizes[i] + clIntervals[j] * clSizes[j]) / (clSizes[i] + clSizes[j]);\n                            clSizes[i] = clSizes[i] + clSizes[j];\n                            --clCount;\n                            for (var k = j + 1; k <= clCount; k++) {\n                                clIntervals[k - 1] = clIntervals[k];\n                                clSizes[k - 1] = clSizes[k];\n                            }\n                        }\n                    }\n                }clIntervals.length = clCount;\n                clSizes.length = clCount;\n                return { clIntervals: clIntervals, clSizes: clSizes };\n            }\n        }, {\n            key: \"calculateScore\",\n            value: function calculateScore(clusters) {\n                var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n                var widthTreshold = params.widthTreshold || 0.025;\n                var maxTempos = params.maxTempos || 10;\n\n                var clIntervals = clusters.clIntervals,\n                    clSizes = clusters.clSizes,\n                    clScores = [],\n                    clScoresIdxs = [];\n                var clCount = clIntervals.length;\n\n                for (var i = 0; i < clCount; i++) {\n                    clScores[i] = 10 * clSizes[i];\n                    clScoresIdxs[i] = { score: clScores[i], idx: i };\n                }\n\n                clScoresIdxs.sort(function (a, b) {\n                    return b.score - a.score;\n                });\n                if (clScoresIdxs.length > maxTempos) {\n                    for (var _i = maxTempos - 1; _i < clScoresIdxs.length - 1; _i++) {\n                        if (clScoresIdxs[_i].score == clScoresIdxs[_i + 1].score) {\n                            maxTempos++;\n                        } else {\n                            break;\n                        }\n                    }\n                    clScoresIdxs.length = maxTempos;\n                }\n\n                clScoresIdxs = clScoresIdxs.map(function (a) {\n                    return a.idx;\n                });\n\n                for (var _i2 = 0; _i2 < clCount; _i2++) {\n                    for (var j = _i2 + 1; j < clCount; j++) {\n                        var ratio = clIntervals[_i2] / clIntervals[j];\n                        var isFraction = ratio < 1;\n                        var d = void 0,\n                            err = void 0;\n                        d = isFraction ? Math.round(1 / ratio) : Math.round(ratio);\n                        if (d < 2 || d > 8) continue;\n\n                        if (isFraction) err = Math.abs(clIntervals[_i2] * d - clIntervals[j]);else err = Math.abs(clIntervals[_i2] - clIntervals[j] * d);\n                        var errTreshold = isFraction ? widthTreshold : widthTreshold * d;\n                        if (err >= errTreshold) continue;\n\n                        d = d >= 5 ? 1 : 6 - d;\n                        clScores[_i2] += d * clSizes[j];\n                        clScores[j] += d * clSizes[_i2];\n                    }\n                }\n                return { clScores: clScores, clScoresIdxs: clScoresIdxs };\n            }\n        }, {\n            key: \"createTempoList\",\n            value: function createTempoList(clusters) {\n                var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n                var widthTreshold = params.widthTreshold || 0.025,\n                    minBeatInterval = params.minBeatInterval || 0.3,\n                    maxBeatInterval = params.maxBeatInterval || 1;\n                var clIntervals = clusters.clIntervals,\n                    clSizes = clusters.clSizes,\n                    clScores = clusters.clScores,\n                    clScoresIdxs = clusters.clScoresIdxs,\n                    tempoList = [];\n                var clCount = clIntervals.length;\n\n                for (var i = 0; i < clScoresIdxs.length; i++) {\n                    var idx = clScoresIdxs[i];\n                    var newSum = clIntervals[idx] * clScores[idx];\n                    var newWeight = clScores[idx];\n                    var err = void 0,\n                        errTreshold = void 0;\n                    for (var j = 0; j < clCount; j++) {\n                        if (j == idx) continue;\n                        var ratio = clIntervals[idx] / clIntervals[j];\n                        var isFraction = ratio < 1;\n                        var sumInc = 0;\n                        var d = isFraction ? Math.round(1 / ratio) : Math.round(ratio);\n                        if (d < 2 || d > 8) continue;\n\n                        if (isFraction) {\n                            err = Math.abs(clIntervals[idx] * d - clIntervals[j]);\n                            errTreshold = widthTreshold;\n                        } else {\n                            err = Math.abs(clIntervals[idx] - d * clIntervals[j]);\n                            errTreshold = widthTreshold * d;\n                        }\n                        if (err >= errTreshold) continue;\n\n                        if (isFraction) {\n                            newSum += clIntervals[j] / d * clScores[j];\n                        } else {\n                            newSum += clIntervals[j] * d * clScores[j];\n                        }\n                        newWeight += clScores[j];\n                    }\n                    var beat = newSum / newWeight;\n\n                    while (beat < minBeatInterval) {\n                        beat *= 2;\n                    }while (beat > maxBeatInterval) {\n                        beat /= 2;\n                    }tempoList.push(beat);\n                }\n                return tempoList;\n            }\n        }]);\n\n        return TempoInduction;\n    }();\n\n    exports.default = TempoInduction;\n    module.exports = exports[\"default\"];\n});", "(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define([\"module\", \"exports\"], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(module, exports);\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod, mod.exports);\n    global.Agent = mod.exports;\n  }\n})(this, function (module, exports) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  var Agent = function () {\n    /**\r\n     * Constructor\r\n     * @param {Number} tempo - tempo hypothesis of the Agent\r\n     * @param {Number} firstBeatTime - the time of the first beat accepted by this Agent\r\n     * @param {Number} firsteventScore - salience value of the first beat accepted by this Agent\r\n     * @param {Array} agentList - reference to the agent list \r\n     * @param {Object} [params={}] - parameters     \r\n     * @param {Number} [params.expiryTime=10] - the time after which an Agent that has not accepted any beat will be destroyed\r\n     * @param {Number} [params.toleranceWndInner=0.04] - the maximum time that a beat can deviate from the predicted beat time without a fork occurring\r\n     * @param {Number} [params.toleranceWndPre=0.15] - the maximum amount by which a beat can be earlier than the predicted beat time, expressed as a fraction of the beat period\r\n     * @param {Number} [params.toleranceWndPost=0.3] - the maximum amount by which a beat can be later than the predicted beat time, expressed as a fraction of the beat period\r\n     * @param {Number} [params.correctionFactor=50] - correction factor for updating beat period\r\n     * @param {Number} [params.maxChange=0.2] - the maximum allowed deviation from the initial tempo, expressed as a fraction of the initial beat period\r\n     * @param {Number} [params.penaltyFactor=0.5] - factor for correcting score, if onset do not coincide precisely with predicted beat time\r\n     */\n    function Agent(tempo, firstBeatTime, firsteventScore, agentList) {\n      var params = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n\n      _classCallCheck(this, Agent);\n\n      /** \r\n       * the time after which an Agent that has not accepted any beat will be destroyed\r\n       * @type {Number} \r\n       */\n      this.expiryTime = params.expiryTime || 10;\n      /** \r\n       * the maximum time that a beat can deviate from the predicted beat time without a fork occurring\r\n       * @type {Number} \r\n       */\n      this.toleranceWndInner = params.toleranceWndInner || 0.04;\n      /** \r\n       * the maximum amount by which a beat can be earlier than the predicted beat time, expressed as a fraction of the beat period\r\n       * @type {Number} \r\n       */\n      this.toleranceWndPre = params.toleranceWndPre || 0.15;\n      /** \r\n       * the maximum amount by which a beat can be later than the predicted beat time, expressed as a fraction of the beat period\r\n       * @type {Number} \r\n       */\n      this.toleranceWndPost = params.toleranceWndPost || 0.3;\n\n      this.toleranceWndPre *= tempo;\n      this.toleranceWndPost *= tempo;\n\n      /** \r\n       * correction factor for updating beat period\r\n       * @type {Number} \r\n       */\n      this.correctionFactor = params.correctionFactor || 50;\n      /** \r\n       * the maximum allowed deviation from the initial tempo, expressed as a fraction of the initial beat period\r\n       * @type {Number} \r\n       */\n      this.maxChange = params.maxChange || 0.2;\n      /** \r\n       * factor for correcting score, if onset do not coincide precisely with predicted beat time\r\n       * @type {Number} \r\n       */\n      this.penaltyFactor = params.penaltyFactor || 0.5;\n\n      /** \r\n       * the current tempo hypothesis of the Agent, expressed as the beat period\r\n       * @type {Number} \r\n       */\n      this.beatInterval = tempo;\n      /** \r\n       * the initial tempo hypothesis of the Agent, expressed as the beat period\r\n       * @type {Number}\r\n       */\n      this.initialBeatInterval = tempo;\n      /** \r\n       * the time of the most recent beat accepted by this Agent\r\n       * @type {Number} \r\n       */\n      this.beatTime = firstBeatTime;\n      /** \r\n       * the number of beats found by this Agent, including interpolated beats\r\n       * @type {Number} \r\n       */\n      this.totalBeatCount = 1;\n      /** \r\n       * the array of onsets accepted by this Agent as beats, plus interpolated beats\r\n       * @type {Array} \r\n       */\n      this.events = [firstBeatTime];\n      /** \r\n       * sum of salience values of the onsets which have been interpreted as beats by this Agent\r\n       * @type {Number} \r\n       */\n      this.score = firsteventScore;\n      /** \r\n       * reference to the agent list \r\n       * @type {Array} \r\n       */\n      this.agentListRef = agentList;\n    }\n    /**\r\n     * The event time is tested if it is a beat time\r\n     * @param {Number} eventTime - the event time to be tested\r\n     * @param {Number} eventScore - salience values of the event time\r\n     * @return {Boolean} indicate whether the given event time was accepted as a beat time\r\n     */\n\n\n    _createClass(Agent, [{\n      key: \"considerEvent\",\n      value: function considerEvent(eventTime, eventScore) {\n        if (eventTime - this.events[this.events.length - 1] > this.expiryTime) {\n          this.score = -1;\n          return false;\n        }\n\n        var beatCount = Math.round((eventTime - this.beatTime) / this.beatInterval);\n        var err = eventTime - this.beatTime - beatCount * this.beatInterval;\n\n        if (beatCount > 0 && err >= -this.toleranceWndPre && err <= this.toleranceWndPost) {\n          if (Math.abs(err) > this.toleranceWndInner) {\n            this.agentListRef.push(this.clone());\n          }\n          this.acceptEvent(eventTime, eventScore, err, beatCount);\n          return true;\n        }\n        return false;\n      }\n    }, {\n      key: \"acceptEvent\",\n      value: function acceptEvent(eventTime, eventScore, err, beatCount) {\n        this.beatTime = eventTime;\n        this.events.push(eventTime);\n\n        var corrErr = err / this.correctionFactor;\n        if (Math.abs(this.initialBeatInterval - this.beatInterval - corrErr) < this.maxChange * this.initialBeatInterval) {\n          this.beatInterval += corrErr;\n        }\n        this.totalBeatCount += beatCount;\n        var errFactor = err > 0 ? err / this.toleranceWndPost : err / -this.toleranceWndPre;\n        var scoreFactor = 1 - this.penaltyFactor * errFactor;\n        this.score += eventScore * scoreFactor;\n      }\n    }, {\n      key: \"fillBeats\",\n      value: function fillBeats() {\n        var prevBeat = void 0,\n            nextBeat = void 0,\n            currentInterval = void 0,\n            beats = void 0;\n        prevBeat = 0;\n        if (this.events.length > 2) {\n          prevBeat = this.events[0];\n        }\n\n        for (var i = 0; i < this.events.length; i++) {\n          nextBeat = this.events[i];\n          beats = Math.round((nextBeat - prevBeat) / this.beatInterval - 0.01);\n          currentInterval = (nextBeat - prevBeat) / beats;\n          var k = 0;\n          for (; beats > 1; beats--) {\n            prevBeat += currentInterval;\n            this.events.splice(i + k, 0, prevBeat);\n            k++;\n          }\n          prevBeat = nextBeat;\n        }\n      }\n    }, {\n      key: \"clone\",\n      value: function clone() {\n        var newAgent = new Agent();\n        newAgent.beatInterval = this.beatInterval;\n        newAgent.initialBeatInterval = this.initialBeatInterval;\n        newAgent.beatTime = this.beatTime;\n        newAgent.totalBeatCount = this.totalBeatCount;\n        newAgent.events = this.events.slice();\n        newAgent.expiryTime = this.expiryTime;\n        newAgent.toleranceWndInner = this.toleranceWndInner;\n        newAgent.toleranceWndPre = this.toleranceWndPre;\n        newAgent.toleranceWndPost = this.toleranceWndPost;\n        newAgent.correctionFactor = this.correctionFactor;\n        newAgent.maxChange = this.maxChange;\n        newAgent.penaltyFactor = this.penaltyFactor;\n        newAgent.score = this.score;\n        newAgent.agentListRef = this.agentListRef;\n\n        return newAgent;\n      }\n    }]);\n\n    return Agent;\n  }();\n\n  exports.default = Agent;\n  module.exports = exports[\"default\"];\n});", "(function (global, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define([\"module\", \"exports\", \"./Agent\"], factory);\n    } else if (typeof exports !== \"undefined\") {\n        factory(module, exports, require(\"./Agent\"));\n    } else {\n        var mod = {\n            exports: {}\n        };\n        factory(mod, mod.exports, global.Agent);\n        global.BeatTracking = mod.exports;\n    }\n})(this, function (module, exports, _Agent) {\n    \"use strict\";\n\n    Object.defineProperty(exports, \"__esModule\", {\n        value: true\n    });\n\n    var _Agent2 = _interopRequireDefault(_Agent);\n\n    function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n            default: obj\n        };\n    }\n\n    function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError(\"Cannot call a class as a function\");\n        }\n    }\n\n    var _createClass = function () {\n        function defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n                var descriptor = props[i];\n                descriptor.enumerable = descriptor.enumerable || false;\n                descriptor.configurable = true;\n                if (\"value\" in descriptor) descriptor.writable = true;\n                Object.defineProperty(target, descriptor.key, descriptor);\n            }\n        }\n\n        return function (Constructor, protoProps, staticProps) {\n            if (protoProps) defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) defineProperties(Constructor, staticProps);\n            return Constructor;\n        };\n    }();\n\n    var BeatTracking = function () {\n        function BeatTracking() {\n            _classCallCheck(this, BeatTracking);\n        }\n\n        _createClass(BeatTracking, null, [{\n            key: \"trackBeat\",\n            value: function trackBeat(events, eventsScores, tempoList) {\n                var params = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n                var initPeriod = params.initPeriod || 5,\n                    thresholdBI = params.thresholdBI || 0.02,\n                    thresholdBT = params.thresholdBT || 0.04;\n                function removeSimilarAgents() {\n                    agents.sort(function (a1, a2) {\n                        return a1.beatInterval - a2.beatInterval;\n                    });\n                    var length = agents.length;\n                    for (var i = 0; i < length; i++) {\n                        if (agents[i].score < 0) continue;\n                        for (var _j = i + 1; _j < length; _j++) {\n                            if (agents[_j].beatInterval - agents[i].beatInterval > thresholdBI) {\n                                break;\n                            }\n                            if (Math.abs(agents[_j].beatTime - agents[i].beatTime) > thresholdBT) {\n                                continue;\n                            }\n                            if (agents[i].score < agents[_j].score) {\n                                agents[i].score = -1;\n                            } else {\n                                agents[_j].score = -1;\n                            }\n                        }\n                    }\n                    for (var _i = length - 1; _i >= 0; _i--) {\n                        if (agents[_i].score < 0) {\n                            agents.splice(_i, 1);\n                        }\n                    }\n                }\n                var agents = [];\n\n                for (var i = 0; i < tempoList.length; i++) {\n                    agents.push(new _Agent2.default(tempoList[i], events[0], eventsScores[0], agents, params));\n                }\n                var j = 1;\n                removeSimilarAgents();\n\n                while (events[j] < initPeriod) {\n                    var agentsLength = agents.length;\n                    var prevBeatInterval = -1;\n                    var isEventAccepted = true;\n                    for (var k = 0; k < agentsLength; k++) {\n                        if (agents[k].beatInterval != prevBeatInterval) {\n                            if (!isEventAccepted) {\n                                agents.push(new _Agent2.default(prevBeatInterval, events[j], eventsScores[j], agents, params));\n                            }\n                            prevBeatInterval = agents[k].beatInterval;\n                            isEventAccepted = false;\n                        }\n                        isEventAccepted = agents[k].considerEvent(events[j], eventsScores[j]) || isEventAccepted;\n                    }\n                    removeSimilarAgents();\n                    j++;\n                }\n                var eventsLength = events.length;\n                for (var _i2 = j; _i2 < eventsLength; _i2++) {\n                    var _agentsLength = agents.length;\n                    for (var _j2 = 0; _j2 < _agentsLength; _j2++) {\n                        agents[_j2].considerEvent(events[_i2], eventsScores[_i2]);\n                    }\n                    removeSimilarAgents();\n                }\n\n                return agents;\n            }\n        }]);\n\n        return BeatTracking;\n    }();\n\n    exports.default = BeatTracking;\n    module.exports = exports[\"default\"];\n});", "(function (global, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define([\"module\", \"exports\"], factory);\n    } else if (typeof exports !== \"undefined\") {\n        factory(module, exports);\n    } else {\n        var mod = {\n            exports: {}\n        };\n        factory(mod, mod.exports);\n        global.FFT = mod.exports;\n    }\n})(this, function (module, exports) {\n    \"use strict\";\n\n    Object.defineProperty(exports, \"__esModule\", {\n        value: true\n    });\n\n    function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError(\"Cannot call a class as a function\");\n        }\n    }\n\n    var _createClass = function () {\n        function defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n                var descriptor = props[i];\n                descriptor.enumerable = descriptor.enumerable || false;\n                descriptor.configurable = true;\n                if (\"value\" in descriptor) descriptor.writable = true;\n                Object.defineProperty(target, descriptor.key, descriptor);\n            }\n        }\n\n        return function (Constructor, protoProps, staticProps) {\n            if (protoProps) defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) defineProperties(Constructor, staticProps);\n            return Constructor;\n        };\n    }();\n\n    var FFT = function () {\n        function FFT() {\n            _classCallCheck(this, FFT);\n        }\n\n        _createClass(FFT, null, [{\n            key: \"getHammingWindow\",\n            value: function getHammingWindow(bufferSize) {\n                var a = 25 / 46;\n                var b = 21 / 46;\n                var scale = 1 / bufferSize / 0.54;\n                var sqrtBufferSize = Math.sqrt(bufferSize);\n                var factor = Math.PI * 2 / bufferSize;\n                var wnd = [];\n                for (var i = 0; i < bufferSize; i++) {\n                    wnd[i] = sqrtBufferSize * (scale * (a - b * Math.cos(factor * i)));\n                }\n                return wnd;\n            }\n        }, {\n            key: \"getSpectrum\",\n            value: function getSpectrum(re, im) {\n                var direction = -1;\n                var n = re.length;\n                var bits = Math.round(Math.log(n) / Math.log(2));\n                var twoPI = Math.PI * 2;\n                if (n != 1 << bits) throw new Error(\"FFT data must be power of 2\");\n                var localN = void 0;\n                var j = 0;\n                for (var i = 0; i < n - 1; i++) {\n                    if (i < j) {\n                        var temp = re[j];\n                        re[j] = re[i];\n                        re[i] = temp;\n                        temp = im[j];\n                        im[j] = im[i];\n                        im[i] = temp;\n                    }\n                    var k = n / 2;\n                    while (k >= 1 && k - 1 < j) {\n                        j = j - k;\n                        k = k / 2;\n                    }\n                    j = j + k;\n                }\n                for (var m = 1; m <= bits; m++) {\n                    localN = 1 << m;\n                    var Wjk_r = 1;\n                    var Wjk_i = 0;\n                    var theta = twoPI / localN;\n                    var Wj_r = Math.cos(theta);\n                    var Wj_i = direction * Math.sin(theta);\n                    var nby2 = localN / 2;\n                    for (j = 0; j < nby2; j++) {\n                        for (var _k = j; _k < n; _k += localN) {\n                            var id = _k + nby2;\n                            var tempr = Wjk_r * re[id] - Wjk_i * im[id];\n                            var tempi = Wjk_r * im[id] + Wjk_i * re[id];\n                            re[id] = re[_k] - tempr;\n                            im[id] = im[_k] - tempi;\n                            re[_k] += tempr;\n                            im[_k] += tempi;\n                        }\n                        var wtemp = Wjk_r;\n                        Wjk_r = Wj_r * Wjk_r - Wj_i * Wjk_i;\n                        Wjk_i = Wj_r * Wjk_i + Wj_i * wtemp;\n                    }\n                }\n\n                for (var _i = 0; _i < re.length; _i++) {\n                    var pow = re[_i] * re[_i] + im[_i] * im[_i];\n                    //im[i] = Math.atan2(im[i], re[i]);\n                    re[_i] = pow;\n                }\n\n                for (var _i2 = 0; _i2 < re.length; _i2++) {\n                    re[_i2] = Math.sqrt(re[_i2]);\n                }\n            }\n        }]);\n\n        return FFT;\n    }();\n\n    exports.default = FFT;\n    module.exports = exports[\"default\"];\n});", "(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define([\"module\", \"exports\", \"./OnsetDetection\", \"./TempoInduction\", \"./BeatTracking\", \"./FFT\"], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(module, exports, require(\"./OnsetDetection\"), require(\"./TempoInduction\"), require(\"./BeatTracking\"), require(\"./FFT\"));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod, mod.exports, global.OnsetDetection, global.TempoInduction, global.BeatTracking, global.FFT);\n    global.MusicTempo = mod.exports;\n  }\n})(this, function (module, exports, _OnsetDetection, _TempoInduction, _BeatTracking, _FFT) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _OnsetDetection2 = _interopRequireDefault(_OnsetDetection);\n\n  var _TempoInduction2 = _interopRequireDefault(_TempoInduction);\n\n  var _BeatTracking2 = _interopRequireDefault(_BeatTracking);\n\n  var _FFT2 = _interopRequireDefault(_FFT);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var MusicTempo =\n  /**\r\n   * Constructor\r\n   * @param {Float32Array} audioData - non-interleaved IEEE 32-bit linear PCM with a nominal range of -1 -> +1 (Web Audio API - Audio Buffer)\r\n   * @param {Object} [params={}] - parameters\r\n   * @param {Number} [params.bufferSize=2048] - FFT windows size\r\n   * @param {Number} [params.hopSize=441] - spacing of audio frames in samples\r\n   * @param {Number} [params.decayRate=0.84] - how quickly previous peaks are forgotten\r\n   * @param {Number} [params.peakFindingWindow=6] - minimum distance between peaks\r\n   * @param {Number} [params.meanWndMultiplier=3] - multiplier for peak finding window\r\n   * @param {Number} [params.peakThreshold=0.35] - minimum value of peaks\r\n   * @param {Number} [params.widthTreshold=0.025] - the maximum difference in IOIs which are in the same cluster\r\n   * @param {Number} [params.maxIOI=2.5] - the maximum IOI for inclusion in a cluster\r\n   * @param {Number} [params.minIOI=0.07] - the minimum IOI for inclusion in a cluster\r\n   * @param {Number} [params.maxTempos=10] - initial amount of tempo hypotheses\r\n   * @param {Number} [params.minBeatInterval=0.3] - the minimum inter-beat interval (IBI) (0.30 seconds == 200 BPM)\r\n   * @param {Number} [params.maxBeatInterval=1] - the maximum inter-beat interval (IBI) (1.00 seconds ==  60 BPM)\r\n   * @param {Number} [params.initPeriod=5] - duration of the initial section\r\n   * @param {Number} [params.thresholdBI=0.02] - for the purpose of removing duplicate agents, the default JND of IBI\r\n   * @param {Number} [params.thresholdBT=0.04] - for the purpose of removing duplicate agents, the default JND of phase\r\n   * @param {Number} [params.expiryTime=10] - the time after which an Agent that has not accepted any beat will be destroyed\r\n   * @param {Number} [params.toleranceWndInner=0.04] - the maximum time that a beat can deviate from the predicted beat time without a fork occurring\r\n   * @param {Number} [params.toleranceWndPre=0.15] - the maximum amount by which a beat can be earlier than the predicted beat time, expressed as a fraction of the beat period\r\n   * @param {Number} [params.toleranceWndPost=0.3] - the maximum amount by which a beat can be later than the predicted beat time, expressed as a fraction of the beat period\r\n   * @param {Number} [params.correctionFactor=50] - correction factor for updating beat period\r\n   * @param {Number} [params.maxChange=0.2] - the maximum allowed deviation from the initial tempo, expressed as a fraction of the initial beat period\r\n   * @param {Number} [params.penaltyFactor=0.5] - factor for correcting score, if onset do not coincide precisely with predicted beat time\r\n   */\n  function MusicTempo(audioData) {\n    var _this = this;\n\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, MusicTempo);\n\n    if (audioData instanceof Float32Array) {\n      // Production steps of ECMA-262, Edition 6, 22.1.2.1\n      if (!Array.from) {\n        Array.from = function () {\n          var toStr = Object.prototype.toString;\n          var isCallable = function isCallable(fn) {\n            return typeof fn === 'function' || toStr.call(fn) === '[object Function]';\n          };\n          var toInteger = function toInteger(value) {\n            var number = Number(value);\n            if (isNaN(number)) {\n              return 0;\n            }\n            if (number === 0 || !isFinite(number)) {\n              return number;\n            }\n            return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));\n          };\n          var maxSafeInteger = Math.pow(2, 53) - 1;\n          var toLength = function toLength(value) {\n            var len = toInteger(value);\n            return Math.min(Math.max(len, 0), maxSafeInteger);\n          };\n\n          // The length property of the from method is 1.\n          return function from(arrayLike /*, mapFn, thisArg */) {\n            // 1. Let C be the this value.\n            var C = this;\n\n            // 2. Let items be ToObject(arrayLike).\n            var items = Object(arrayLike);\n\n            // 3. ReturnIfAbrupt(items).\n            if (arrayLike == null) {\n              throw new TypeError('Array.from requires an array-like object - not null or undefined');\n            }\n\n            // 4. If mapfn is undefined, then let mapping be false.\n            var mapFn = arguments.length > 1 ? arguments[1] : void undefined;\n            var T;\n            if (typeof mapFn !== 'undefined') {\n              // 5. else\n              // 5. a If IsCallable(mapfn) is false, throw a TypeError exception.\n              if (!isCallable(mapFn)) {\n                throw new TypeError('Array.from: when provided, the second argument must be a function');\n              }\n\n              // 5. b. If thisArg was supplied, let T be thisArg; else let T be undefined.\n              if (arguments.length > 2) {\n                T = arguments[2];\n              }\n            }\n\n            // 10. Let lenValue be Get(items, \"length\").\n            // 11. Let len be ToLength(lenValue).\n            var len = toLength(items.length);\n\n            // 13. If IsConstructor(C) is true, then\n            // 13. a. Let A be the result of calling the [[Construct]] internal method \n            // of C with an argument list containing the single item len.\n            // 14. a. Else, Let A be ArrayCreate(len).\n            var A = isCallable(C) ? Object(new C(len)) : new Array(len);\n\n            // 16. Let k be 0.\n            var k = 0;\n            // 17. Repeat, while k < lenâ€¦ (also steps a - h)\n            var kValue;\n            while (k < len) {\n              kValue = items[k];\n              if (mapFn) {\n                A[k] = typeof T === 'undefined' ? mapFn(kValue, k) : mapFn.call(T, kValue, k);\n              } else {\n                A[k] = kValue;\n              }\n              k += 1;\n            }\n            // 18. Let putStatus be Put(A, \"length\", len, true).\n            A.length = len;\n            // 20. Return A.\n            return A;\n          };\n        }();\n      }\n      audioData = Array.from(audioData);\n    } else if (!Array.isArray(audioData)) {\n      throw \"audioData is not an array\";\n    }\n    var timeStep = params.timeStep || 0.01;\n    var res = _OnsetDetection2.default.calculateSF(audioData, _FFT2.default, params);\n    /** \r\n     * Spectral flux\r\n     * @type {Array} \r\n     */\n    this.spectralFlux = res;\n    _OnsetDetection2.default.normalize(this.spectralFlux);\n    /** \r\n     * Spectral flux peaks indexes\r\n     * @type {Array} \r\n     */\n    this.peaks = _OnsetDetection2.default.findPeaks(this.spectralFlux, params);\n    /** \r\n     * Onsets times array\r\n     * @type {Array} \r\n     */\n    this.events = this.peaks.map(function (a) {\n      return a * timeStep;\n    });\n\n    var clusters = _TempoInduction2.default.processRhythmicEvents(this.events, params);\n    clusters = _TempoInduction2.default.mergeClusters(clusters, params);\n    var scores = _TempoInduction2.default.calculateScore(clusters, params);\n    clusters = {\n      clIntervals: clusters.clIntervals,\n      clSizes: clusters.clSizes,\n      clScores: scores.clScores,\n      clScoresIdxs: scores.clScoresIdxs\n    };\n    /** \r\n     * Tempo hypotheses array\r\n     * @type {Array} \r\n     */\n    this.tempoList = _TempoInduction2.default.createTempoList(clusters, params);\n\n    var minSFValue = this.spectralFlux.reduce(function (a, b) {\n      return Math.min(a, b);\n    });\n    var eventsScores = this.peaks.map(function (a) {\n      return _this.spectralFlux[a] - minSFValue;\n    });\n    /** \r\n     * Agents array\r\n     * @type {Array} \r\n     */\n    this.agents = _BeatTracking2.default.trackBeat(this.events, eventsScores, this.tempoList, params);\n\n    var bestScore = -1;\n    var idxBestAgent = -1;\n    /** \r\n     * The tempo value in beats per minute\r\n     * @type {Number} \r\n     */\n    this.tempo = -1;\n    /** \r\n     * Beat times array\r\n     * @type {Array} \r\n     */\n    this.beats = [];\n    /** \r\n     * Inter-beat interval\r\n     * @type {Number} \r\n     */\n    this.beatInterval = -1;\n\n    for (var i = 0; i < this.agents.length; i++) {\n      if (this.agents[i].score > bestScore) {\n        bestScore = this.agents[i].score;\n        idxBestAgent = i;\n      }\n    }\n    if (this.agents[idxBestAgent]) {\n      /** \r\n       * The agent with the highest score\r\n       * @type {Agent} \r\n       */\n      this.bestAgent = this.agents[idxBestAgent];\n      this.bestAgent.fillBeats();\n      this.tempo = (60 / this.bestAgent.beatInterval).toFixed(3);\n      this.beatInterval = this.bestAgent.beatInterval;\n      this.beats = this.bestAgent.events;\n    }\n    if (this.tempo == -1) {\n      throw \"Tempo extraction failed\";\n    }\n  };\n\n  exports.default = MusicTempo;\n  module.exports = exports[\"default\"];\n});"],
  "mappings": "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",
  "names": ["module", "exports", "OnsetDetection", "value", "k", "module", "exports", "TempoInduction", "module", "exports", "Agent", "module", "exports", "BeatTracking", "i", "module", "exports", "FFT", "module", "exports", "MusicTempo", "isCallable", "toInteger", "toLength"]
}
